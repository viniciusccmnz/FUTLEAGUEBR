<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚úÖ Teste - Erro Corrigido</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f0f0f0;
            padding: 20px;
        }
        .status {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 5px solid #00ff00;
        }
        .error {
            background: #ffebee;
            border-left-color: #f44336;
        }
        .console-log {
            background: #000;
            color: #00ff00;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            min-height: 100px;
            overflow-y: auto;
            margin: 10px 0;
        }
        #pfalta {
            border: 2px solid #333;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>‚úÖ Teste - Erro JavaScript Corrigido</h1>
    
    <div class="status">
        <h3>üîç Status do Carregamento:</h3>
        <div id="loading-status">Verificando...</div>
    </div>

    <div class="status">
        <h3>üìù Console Log:</h3>
        <div class="console-log" id="console-output">
            Carregando sistema...<br>
        </div>
    </div>

    <!-- Carregar jQuery primeiro -->
    <script src="../../js/jquery.js"></script>
    
    <!-- CSS -->
    <link type="text/css" rel="stylesheet" href="media/css/style6.css">

    <!-- Sistema de Falta -->
    <section id="pfalta">
        <input type="hidden" id="status_nerfar" value="0">
        <div id="base_user" style="display:none"></div>
        <div id="base_extras" style="display:none"></div>
        <div id="comemoracao" style="display:none"></div>

        <div id="fundo_f">
            <div id="goleiro"></div>
            <div id="barreira"></div>
            <div id="chute_esquerda" class="chute" onclick="testarFalta('esquerda')"></div>
            <div id="chute_meio" class="chute" onclick="testarFalta('meio')"></div>
            <div id="chute_direita" class="chute" onclick="testarFalta('direita')"></div>
            <input type="hidden" id="habilidade" value="5">
            <input type="hidden" id="cfalta" value="2973">
            <input type="hidden" id="habilidade_falta" value="0">
            <input type="hidden" id="som_falta" value="0">
            <img src="falta/bola.png" class="bola" id="imgs" name="logo" alt="Soccer ball">
        </div>
        <div id="goool">
            <div id="conteudo_gol"></div>
            <div id="tente"></div>
            <div id="novamente"></div>
        </div>
        <audio id="vaia" src="falta/vaiaa.mp3"></audio>
        <audio id="chute-audio" src="falta/0004868a.mp3"></audio>
        <audio id="gol-audio" src="falta/gola.mp3"></audio>
    </section>

    <script>
        // Interceptar erros de JavaScript
        let hasError = false;
        
        window.onerror = function(message, source, lineno, colno, error) {
            hasError = true;
            addToConsole(`‚ùå ERRO: ${message} (linha: ${lineno})`);
            updateStatus('error', `Erro JavaScript detectado: ${message}`);
            return false;
        };

        function addToConsole(message) {
            const console_div = document.getElementById('console-output');
            const time = new Date().toLocaleTimeString();
            console_div.innerHTML += `[${time}] ${message}<br>`;
            console_div.scrollTop = console_div.scrollHeight;
        }

        function updateStatus(type, message) {
            const statusDiv = document.getElementById('loading-status');
            statusDiv.innerHTML = message;
            statusDiv.parentElement.className = type === 'error' ? 'status error' : 'status';
        }

        function testarFalta(direcao) {
            addToConsole(`üéØ Testando falta ${direcao}`);
            
            try {
                if (direcao === 'esquerda' && typeof falta_esquerda === 'function') {
                    falta_esquerda();
                    addToConsole(`‚úÖ falta_esquerda() executada`);
                } else if (direcao === 'meio' && typeof falta_meio === 'function') {
                    falta_meio();
                    addToConsole(`‚úÖ falta_meio() executada`);
                } else if (direcao === 'direita' && typeof falta_direita === 'function') {
                    falta_direita();
                    addToConsole(`‚úÖ falta_direita() executada`);
                } else {
                    addToConsole(`‚ùå Fun√ß√£o falta_${direcao} n√£o encontrada`);
                }
            } catch (error) {
                addToConsole(`‚ùå Erro ao executar: ${error.message}`);
            }
        }

        // Carregar o script da falta ap√≥s o DOM estar pronto
        document.addEventListener('DOMContentLoaded', function() {
            addToConsole('‚úÖ DOM carregado');
            
            // Aguardar um pouco e ent√£o carregar o script
            setTimeout(function() {
                addToConsole('üì• Carregando scriptfalta.js...');
                
                const script = document.createElement('script');
                script.src = 'scriptfalta.js';
                script.onload = function() {
                    if (!hasError) {
                        addToConsole('‚úÖ scriptfalta.js carregado sem erros!');
                        updateStatus('success', '‚úÖ Sistema carregado com sucesso!');
                    }
                };
                script.onerror = function() {
                    addToConsole('‚ùå Erro ao carregar scriptfalta.js');
                    updateStatus('error', 'Erro ao carregar script');
                };
                
                document.head.appendChild(script);
            }, 100);
        });
    </script>
</body>
</html>
