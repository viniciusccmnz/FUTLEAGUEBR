<script src="jquery.js"></script>
<script>
// Carregar o status VIP dinamicamente
$(document).ready(function() {
    $.ajax({
        url: 'get_status.php',
        type: 'GET',
        success: function(data) {
            $('#status_nerfar').val(data);
        },
        error: function() {
            $('#status_nerfar').val('0'); // Fallback para usuário normal
        }
    });
});
</script>
<script src="scriptfalta.js"></script>
<link type="text/css" rel="stylesheet" href="media/css/style6.css">

<div id="passe_certo_swf" style="margin-left: 20px;">
    <section id="pfalta">
        <input type="hidden" id="status_nerfar" value="">
        <div id="base_user" style="display:none"></div>
        <div id="base_extras" style="display:none"></div>
        <div id="comemoracao" style="display:none"></div>
        <div id="time_chute2" style="display:none"></div>
        <div id="hidden" style="display:none"></div>

        <div id="fundo_f">
            <div id="goleiro" style="background-image: url('img/lacanco.gif');"></div>
            <div id="barreira"></div>
            <div id="chute_esquerda" class="chute" onclick="falta_esquerda();"></div>
            <div id="chute_meio" class="chute" onclick="falta_meio();"></div>
            <div id="chute_direita" class="chute" onclick="falta_direita();"></div>
            <input type="hidden" id="habilidade" value="5">
            <input type="hidden" id="cfalta" value="7379">
            <input type="hidden" id="habilidade_falta" value="0">
            <input type="hidden" id="som_falta" value="0">
            <img src="img/bola.png" class="bola" id="imgs" name="logo" alt="Soccer ball">
        </div>
        <div id="goool">
            <div id="conteudo_gol"></div>
            <div id="tente"></div>
            <div id="novamente"></div>
        </div>
    </section>
</div>

<script>
    // Função para redirecionar após animação completa
    function redirecionarAposAnimacao() {
        setTimeout(function() {
            // Redirecionar para a página inicial após 3 segundos
            window.parent.location.href = '../../index.php';
        }, 3000);
    }
    
    // Sobrescrever as funções de comemoração para adicionar redirecionamento
    $(document).ready(function() {
        // Interceptar quando a animação de gol ou erro é mostrada
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.type === 'childList') {
                    const addedNodes = Array.from(mutation.addedNodes);
                    addedNodes.forEach(function(node) {
                        if (node.id === 'goool' && node.style.display !== 'none') {
                            // Animação de gol ou erro foi mostrada, iniciar redirecionamento
                            redirecionarAposAnimacao();
                        }
                    });
                }
            });
        });
        
        // Observar mudanças no elemento goool
        const goool = document.getElementById('goool');
        if (goool) {
            observer.observe(goool, { childList: true, subtree: true, attributes: true });
        }
        
        // Também observar mudanças de display
        const observerDisplay = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                    const goool = document.getElementById('goool');
                    if (goool && goool.style.display !== 'none') {
                        // goool foi mostrado, iniciar redirecionamento
                        redirecionarAposAnimacao();
                    }
                }
            });
        });
        
        if (goool) {
            observerDisplay.observe(goool, { attributes: true });
        }
    });
</script>